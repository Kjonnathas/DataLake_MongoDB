{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"extracao_dados/","title":"Script de Integra\u00e7\u00e3o e Transforma\u00e7\u00e3o de Dados com Yahoo Finance, MongoDB e MySQL","text":""},{"location":"extracao_dados/#descricao-geral","title":"Descri\u00e7\u00e3o Geral","text":"<p>Este script realiza a extra\u00e7\u00e3o de dados hist\u00f3ricos de a\u00e7\u00f5es da API do Yahoo Finance, transforma\u00e7\u00e3o e carregamento dos dados para bancos de dados MongoDB e MySQL. Ele \u00e9 dividido em v\u00e1rias fun\u00e7\u00f5es modulares que implementam o processo ETL (Extra\u00e7\u00e3o, Transforma\u00e7\u00e3o e Carregamento).</p>"},{"location":"extracao_dados/#bibliotecas-utilizadas","title":"Bibliotecas Utilizadas","text":"<ul> <li><code>pymongo</code>: Conecta-se ao MongoDB para opera\u00e7\u00f5es de leitura e escrita.</li> <li><code>dotenv</code>: Carrega vari\u00e1veis de ambiente de um arquivo .env.</li> <li><code>os</code>: Manipula caminhos e acessa vari\u00e1veis do ambiente.</li> <li><code>yfinance</code>: Extrai dados financeiros do Yahoo Finance.</li> <li><code>pandas</code>: Manipula e transforma os dados extra\u00eddos.</li> <li><code>pyodbc</code>: Conecta-se a bancos de dados via ODBC.</li> <li><code>logging</code>: Registra logs de eventos e erros durante a execu\u00e7\u00e3o.</li> <li><code>datetime</code>: Manipula datas.</li> <li><code>typing</code>: Define tipos para argumentos e retornos das fun\u00e7\u00f5es.</li> </ul>"},{"location":"extracao_dados/#estrutura-do-script","title":"Estrutura do Script","text":""},{"location":"extracao_dados/#1-configuracao-de-logging","title":"1. Configura\u00e7\u00e3o de Logging","text":"<p>O sistema de logs registra eventos e erros em um arquivo localizado em um caminho especificado pela vari\u00e1vel de ambiente <code>LOG_PATH</code>. O nome do arquivo inclui a data atual no formato <code>log_main_DIA_MES_ANO.log</code>.</p> <pre><code>logging.basicConfig(\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n    filename=os.path.join(log_path, f\"log_main_{day}_{month}_{year}.log\"),\n    filemode=\"a\",\n)\n</code></pre>"},{"location":"extracao_dados/#2-funcoes-do-script","title":"2. Fun\u00e7\u00f5es do Script","text":""},{"location":"extracao_dados/#21-extract_data_yfinance","title":"2.1. extract_data_yfinance","text":"<p>Extrai dados hist\u00f3ricos de a\u00e7\u00f5es para uma lista de tickers fornecidos.</p> <p>Entradas:</p> <ul> <li><code>ticker_list</code> (List): Lista de tickers.</li> <li><code>start_data</code> (str): Data inicial no formato <code>YYYY-MM-DD</code>.</li> <li><code>end_data</code> (str): Data final no formato <code>YYYY-MM-DD</code>.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Uma lista de DataFrames contendo os dados hist\u00f3ricos para cada ticker, ou <code>None</code> em caso de erro.</li> </ul>"},{"location":"extracao_dados/#22-transform_dataframe","title":"2.2. transform_dataframe","text":"<p>Consolida uma lista de DataFrames em um \u00fanico DataFrame.</p> <p>Entrada:</p> <ul> <li><code>df_list</code> (List): Lista de DataFrames a serem concatenados.</li> </ul> <p>Sa\u00edda:</p> <ul> <li><code>DataFrame</code> consolidado ou <code>None</code> caso a lista esteja vazia.</li> </ul>"},{"location":"extracao_dados/#23-connect_to_mongo","title":"2.3. connect_to_mongo","text":"<p>Estabelece conex\u00e3o com um banco de dados MongoDB.</p> <p>Entradas:</p> <ul> <li><code>uri</code> (str): URI de conex\u00e3o para o MongoDB.</li> <li><code>database</code> (str): Nome do banco de dados.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Objeto <code>Database</code> representando o banco conectado.</li> </ul>"},{"location":"extracao_dados/#24-delete_data_from_mongo","title":"2.4. delete_data_from_mongo","text":"<p>Remove todas as cole\u00e7\u00f5es de um banco de dados MongoDB.</p> <p>Entrada:</p> <ul> <li><code>database</code> (str): Nome do banco de dados MongoDB.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Nenhuma. Mensagens de sucesso ou erro s\u00e3o registradas nos logs.</li> </ul>"},{"location":"extracao_dados/#25-load_to_mongo","title":"2.5. load_to_mongo","text":"<p>Carrega dados de um DataFrame para um banco MongoDB.</p> <p>Entradas:</p> <ul> <li><code>dataframe</code> (pd.DataFrame): Dados a serem carregados.</li> <li><code>database</code> (str): Nome do banco.</li> <li><code>uri</code> (str): URI de conex\u00e3o.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Nenhuma. Cria cole\u00e7\u00f5es separadas para cada ticker no MongoDB.</li> </ul>"},{"location":"extracao_dados/#26-connect_to_mysql","title":"2.6. connect_to_mysql","text":"<p>Conecta-se a um banco de dados MySQL usando pyodbc.</p> <p>Entradas:</p> <ul> <li><code>driver</code> (str): Driver ODBC.</li> <li><code>server</code> (str): Endere\u00e7o ou nome do servidor.</li> <li><code>db</code> (str): Nome do banco.</li> <li><code>user</code> (str): Nome do usu\u00e1rio.</li> <li><code>password</code> (str): Senha do usu\u00e1rio.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Objeto de conex\u00e3o pyodbc.Connection.</li> </ul>"},{"location":"extracao_dados/#27-load_to_mysql","title":"2.7. load_to_mysql","text":"<p>Carrega dados de um DataFrame em uma tabela MySQL.</p> <p>Entradas:</p> <ul> <li><code>con</code> (pyodbc.Connection): Objeto de conex\u00e3o com MySQL.</li> <li><code>dataframe</code> (pd.DataFrame): Dados a serem carregados.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Nenhuma. Cria a tabela tbl_historico_acoes e insere os dados.</li> </ul>"},{"location":"extracao_dados/#28-main","title":"2.8. main","text":"<p>Fun\u00e7\u00e3o principal que coordena todas as etapas do processo ETL.</p> <p>Entradas:</p> <ul> <li><code>tickers</code> (List): Lista de tickers.</li> <li><code>start_data</code> (str): Data inicial.</li> <li><code>end_data</code> (str): Data final.</li> </ul> <p>Fluxo:</p> <ol> <li>Extrai dados de a\u00e7\u00f5es.</li> <li>Remove dados antigos do MongoDB.</li> <li>Transforma os dados em um DataFrame consolidado.</li> <li>Carrega os dados no MongoDB.</li> <li>Carrega os dados no MySQL.</li> </ol> <pre><code>graph TD\nA[In\u00edcio] --&gt; B[Extrair Dados com yFinance]\nB --&gt; C[Transformar Dados em DataFrame Consolidado]\nC --&gt; D[Excluir Dados no MongoDB]\nD --&gt; E[Carregar Dados no MongoDB]\nE --&gt; F[Conectar ao MySQL]\nF --&gt; G[Carregar Dados no MySQL]\nG --&gt; H[Fim]\nsubgraph \"Detalhes de Extra\u00e7\u00e3o\"\nB1[Recebe Lista de Tickers]\nB2[Chama API yFinance]\nB3[Enriquece com Ticker e Data]\nB --&gt; B1 --&gt; B2 --&gt; B3\nend\nsubgraph \"Processo de Carga MongoDB\"\nE1[Conecta ao MongoDB]\nE2[Cria Documentos]\nE3[Insere por Cole\u00e7\u00e3o]\nE --&gt; E1 --&gt; E2 --&gt; E3\nend\nsubgraph \"Processo de Carga MySQL\"\nG1[Conecta ao Banco]\nG2[Cria Tabela se N\u00e3o Existe]\nG3[Trunca Tabela]\nG4[Insere Linhas no Banco]\nF --&gt; G1 --&gt; G2 --&gt; G3 --&gt; G4\nend\n</code></pre>"},{"location":"extracao_dados/#3-variaveis-de-ambiente-utilizadas","title":"3. Vari\u00e1veis de Ambiente Utilizadas","text":"<ul> <li><code>LOG_PATH</code>: Caminho para salvar os logs.</li> <li><code>MYSQL_DRIVER</code>, <code>MYSQL_SERVER</code>, <code>MYSQL_DATABASE</code>, <code>MYSQL_USERNAME</code>, <code>MYSQL_PASSWORD</code>: Credenciais e par\u00e2metros do MySQL.</li> <li><code>MONGO_URI</code>, <code>MONGO_DATABASE</code>: URI e banco de dados MongoDB.</li> </ul>"},{"location":"extracao_dados/#4-execucao","title":"4. Execu\u00e7\u00e3o","text":"<p>A execu\u00e7\u00e3o \u00e9 iniciada no bloco if <code>__name__ == \"__main__\":</code>. Uma lista predefinida de tickers \u00e9 passada para a fun\u00e7\u00e3o main junto com um intervalo de datas.</p>"},{"location":"extracao_dados/#5-exemplo-de-uso","title":"5. Exemplo de Uso","text":"<pre><code>python script.py\n</code></pre>"},{"location":"extracao_dados/#6-notas-adicionais","title":"6. Notas Adicionais","text":"<ul> <li>Certifique-se de que o arquivo .env contenha todas as vari\u00e1veis necess\u00e1rias.</li> <li>Instale as bibliotecas requeridas usando pip install -r requirements.txt.</li> </ul>"},{"location":"home/","title":"Documenta\u00e7\u00e3o do Projeto","text":"<p>Este projeto tem como objetivo a extra\u00e7\u00e3o, an\u00e1lise e visualiza\u00e7\u00e3o de dados hist\u00f3ricos de a\u00e7\u00f5es armazenados em um banco de dados MySQL. Ele utiliza Python e bibliotecas como pandas, matplotlib e pyodbc para a manipula\u00e7\u00e3o e visualiza\u00e7\u00e3o dos dados. O c\u00f3digo est\u00e1 dividido em duas principais funcionalidades:</p> <ol> <li> <p>Conex\u00e3o e Extra\u00e7\u00e3o de Dados: Conex\u00e3o com um banco de dados MySQL para extrair dados hist\u00f3ricos de a\u00e7\u00f5es.</p> </li> <li> <p>Gera\u00e7\u00e3o de Gr\u00e1ficos de Compara\u00e7\u00e3o: Cria\u00e7\u00e3o de gr\u00e1ficos comparativos de pre\u00e7os de fechamento de a\u00e7\u00f5es ao longo do tempo.</p> </li> </ol> <p>Estrutura do Projeto</p> <ul> <li> <p>P\u00e1gina Home (Esta p\u00e1gina): Introdu\u00e7\u00e3o ao projeto e vis\u00e3o geral.</p> </li> <li> <p>P\u00e1gina Extra\u00e7\u00e3o de Dados: Detalhamento do processo de extra\u00e7\u00e3o de dados.</p> </li> <li> <p>P\u00e1gina Visualiza\u00e7\u00e3o e Gr\u00e1ficos: Explica\u00e7\u00e3o sobre a cria\u00e7\u00e3o e salvamento de gr\u00e1ficos comparativos.</p> </li> </ul>"},{"location":"visualizacao/","title":"Script de Extra\u00e7\u00e3o e Visualiza\u00e7\u00e3o de Dados de A\u00e7\u00f5es do MySQL","text":""},{"location":"visualizacao/#descricao-geral","title":"Descri\u00e7\u00e3o Geral","text":"<p>Este script realiza a extra\u00e7\u00e3o de dados hist\u00f3ricos de a\u00e7\u00f5es armazenados em um banco de dados MySQL, al\u00e9m de gerar gr\u00e1ficos comparativos entre duas a\u00e7\u00f5es espec\u00edficas ao longo do tempo. Os gr\u00e1ficos s\u00e3o salvos como imagens no formato PNG em uma pasta configurada.</p>"},{"location":"visualizacao/#bibliotecas-utilizadas","title":"Bibliotecas Utilizadas","text":"<ul> <li><code>pandas</code>: Manipula e transforma os dados extra\u00eddos.</li> <li><code>matplotlib.pyplot</code>: Cria os gr\u00e1ficos comparativos.</li> <li><code>matplotlib.dates</code>: Formata os eixos de tempo nos gr\u00e1ficos.</li> <li><code>main</code>: Fornece a fun\u00e7\u00e3o connect_to_mysql para conex\u00e3o ao MySQL.</li> <li><code>pyodbc.Connection</code>: Representa a conex\u00e3o com o banco de dados MySQL.</li> <li><code>os</code>: Manipula caminhos de arquivos e acessa vari\u00e1veis de ambiente.</li> <li><code>warnings</code>: Filtra avisos desnecess\u00e1rios.</li> <li><code>typing</code>: Define tipos para argumentos e retornos das fun\u00e7\u00f5es.</li> </ul>"},{"location":"visualizacao/#estrutura-do-script","title":"Estrutura do Script","text":""},{"location":"visualizacao/#1-funcoes-do-script","title":"1. Fun\u00e7\u00f5es do Script","text":""},{"location":"visualizacao/#11-extract_data_from_mysql","title":"1.1. <code>extract_data_from_mysql</code>","text":"<p>Extrai dados hist\u00f3ricos de a\u00e7\u00f5es do banco de dados MySQL para os tickers fornecidos.</p> <p>Entradas:</p> <ul> <li><code>first_ticker</code> (str): O ticker da primeira a\u00e7\u00e3o.</li> <li><code>second_ticker</code> (str): O ticker da segunda a\u00e7\u00e3o.</li> <li><code>con</code> (pyodbc.Connection): Conex\u00e3o ativa com o banco de dados MySQL.</li> </ul> <p>Sa\u00edda:</p> <p>Uma tupla contendo:</p> <ul> <li><code>pd.DataFrame</code>: Dados hist\u00f3ricos das a\u00e7\u00f5es.</li> <li><code>str</code>: Nome do primeiro ticker.</li> <li><code>str</code>: Nome do segundo ticker.</li> </ul> <p>Notas:</p> <p>A coluna de data \u00e9 formatada no tipo datetime para facilitar a manipula\u00e7\u00e3o.</p>"},{"location":"visualizacao/#12-plot_graph","title":"1.2. plot_graph","text":"<p>Gera um gr\u00e1fico comparativo entre duas a\u00e7\u00f5es e salva a imagem em uma pasta especificada.</p> <p>Entradas:</p> <ul> <li><code>first_ticker</code> (str): O ticker da primeira a\u00e7\u00e3o.</li> <li><code>second_ticker</code> (str): O ticker da segunda a\u00e7\u00e3o.</li> <li><code>folder_to_save</code> (str): Caminho da pasta onde o gr\u00e1fico ser\u00e1 salvo.</li> <li><code>con</code> (pyodbc.Connection): Conex\u00e3o ativa com o banco de dados MySQL.</li> </ul> <p>Sa\u00edda:</p> <ul> <li>Nenhuma. O gr\u00e1fico \u00e9 salvo como um arquivo PNG no caminho especificado.</li> </ul> <p>Notas:</p> <p>O gr\u00e1fico utiliza uma grade suave e \u00e9 formatado para exibir os anos no eixo X.</p>"},{"location":"visualizacao/#2-configuracao-de-conexao-e-caminhos","title":"2. Configura\u00e7\u00e3o de Conex\u00e3o e Caminhos","text":"<p>O script utiliza vari\u00e1veis de ambiente para configurar os par\u00e2metros de conex\u00e3o ao banco de dados MySQL e o caminho para salvar os gr\u00e1ficos.</p> <p> Vari\u00e1veis de Ambiente Utilizadas  :</p> <ul> <li><code>MYSQL_DRIVER</code>: Driver ODBC para conex\u00e3o ao MySQL.</li> <li><code>MYSQL_SERVER</code>: Endere\u00e7o do servidor MySQL.</li> <li><code>MYSQL_DATABASE</code>: Nome do banco de dados.</li> <li><code>MYSQL_USERNAME</code>: Nome do usu\u00e1rio.</li> <li><code>MYSQL_PASSWORD</code>: Senha do usu\u00e1rio.</li> <li><code>IMG_PATH</code>: Caminho para salvar os gr\u00e1ficos.</li> </ul>"},{"location":"visualizacao/#3-execucao","title":"3. Execu\u00e7\u00e3o","text":"<p>A execu\u00e7\u00e3o inicia no bloco if <code>__name__ == \"__main__\":</code>. Os tickers das a\u00e7\u00f5es a serem comparadas e o intervalo de datas s\u00e3o definidos diretamente no c\u00f3digo.</p> <p>Fluxo de Execu\u00e7\u00e3o:</p> <ol> <li>Estabelece uma conex\u00e3o com o banco de dados MySQL.</li> <li>Extrai os dados hist\u00f3ricos para os tickers fornecidos.</li> <li>Gera um gr\u00e1fico comparativo entre as duas a\u00e7\u00f5es.</li> <li>Salva o gr\u00e1fico como um arquivo PNG na pasta especificada.</li> </ol> <pre><code>graph TD\n    A[In\u00edcio] --&gt; B[Conectar ao MySQL]\n    B --&gt; C[Extrair dados dos tickers]\n    C --&gt; D{Consulta bem-sucedida?}\n    D --&gt;|Sim| E[Formata\u00e7\u00e3o da data e retorno dos dados]\n    D --&gt;|N\u00e3o| F[Exibir erro de conex\u00e3o]\n    E --&gt; G[Filtrar dados por ticker]\n    G --&gt; H[Gerar gr\u00e1fico]\n    H --&gt; I[Salvar gr\u00e1fico como PNG]\n    I --&gt; J[Exibir gr\u00e1fico]\n    J --&gt; K[Fim]\n    F --&gt; K\n</code></pre>"},{"location":"visualizacao/#4-exemplo-de-uso","title":"4. Exemplo de Uso","text":"<pre><code>python script.py\n</code></pre> <p>Nota: Certifique-se de que todas as vari\u00e1veis de ambiente necess\u00e1rias est\u00e3o configuradas antes de executar o script.</p>"},{"location":"visualizacao/#5-notas-adicionais","title":"5. Notas Adicionais","text":"<ul> <li>O script depende de uma conex\u00e3o MySQL ativa e funcional.</li> <li>As tabelas no banco de dados devem conter pelo menos as colunas ticker, data e close.</li> <li>O gr\u00e1fico \u00e9 salvo em alta qualidade (300 DPI) para uso em apresenta\u00e7\u00f5es e relat\u00f3rios.</li> <li>Caso haja erros na conex\u00e3o ou extra\u00e7\u00e3o, mensagens de erro ser\u00e3o exibidas no console.</li> </ul>"}]}